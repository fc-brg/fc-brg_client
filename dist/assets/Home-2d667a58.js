import{u as e}from"./fc-eba21898.js";import{ag as a,e as t,c as s,f as l,r as o,o as r,a as n,w as i,b as d,h as c,m as u,_ as m,j as g,i as v,t as h,g as f,k as p,F as y}from"./vendor-55a355ca.js";import{_ as k,u as b,b as N}from"./admin-e8e59f4a.js";import{d as x}from"./vuedraggable.umd-06157e8d.js";import"./timezone-f19b4e1b.js";const w={class:"font-weight-bold"},I={class:"text-right"},_={class:"text-right"},S={class:"text-right"},D={class:"text-right"},R={class:"text-right"},P={class:"text-right"},G={class:"text-right"},C={class:"text-right"},A={class:"text-right"},M={class:"text-right"},T={class:"text-right"},V={class:"text-right"},F={class:"text-right"},U={class:"text-right"},j={class:"text-right"},L={class:"text-caption text-grey"},$={class:"font-weight-bold"},B={class:"d-flex justify-center"},E={class:"text-right"},K={class:"text-right"},O={class:"text-right"},z={class:"text-right"},q={class:"text-right"},Z={class:"text-right"},W={class:"text-right"},H={class:"text-right"},J={class:"text-right"},Q={class:"text-right"},X={class:"text-right"},Y={class:"text-right"},ee={class:"text-right"},ae={class:"text-right font-weight-bold"},te={class:"font-weight-bold"},se={class:"d-flex justify-center"},le={class:"text-right"},oe={class:"text-right"},re={class:"text-right font-weight-bold"},ne={class:"text-right"},ie={class:"text-right"},de={class:"text-right"},ce={class:"text-right"},ue={class:"text-right"},me={class:"text-right"},ge={class:"text-right"},ve={class:"text-right"},he={class:"text-right text-red"},fe=k({__name:"Home",setup(k){const fe=e();b();const{users:pe,matches:ye,loading:ke,error:be}=a(fe),Ne=t([]);t("");const xe=t(""),we=t({}),Ie=t(!1),_e=t({}),Se=t(!1),De=t(!1),Re=t(!1),Pe=t(100),Ge=[{title:"선수명",key:"name",sortable:!0,width:"150px"},{title:"시즌",key:"seasonImg",sortable:!1,width:"60px",align:"center"},{title:"출전",key:"appearances",sortable:!0,width:"60px",align:"end"},{title:"일반",key:"goals.normal",sortable:!0,width:"50px",align:"end"},{title:"Z+D",key:"goals.finesse",sortable:!0,width:"50px",align:"end"},{title:"헤더",key:"goals.header",sortable:!0,width:"50px",align:"end"},{title:"로브",key:"goals.lob",sortable:!0,width:"50px",align:"end"},{title:"플레어",key:"goals.flare",sortable:!0,width:"50px",align:"end"},{title:"D+D",key:"goals.low",sortable:!0,width:"50px",align:"end"},{title:"발리",key:"goals.volley",sortable:!0,width:"50px",align:"end"},{title:"프리킥",key:"goals.freekick",sortable:!0,width:"50px",align:"end"},{title:"페널티",key:"goals.penalty",sortable:!0,width:"50px",align:"end"},{title:"너클",key:"goals.knuckle",sortable:!0,width:"50px",align:"end"},{title:"바이시클",key:"goals.bicycle",sortable:!0,width:"50px",align:"end"},{title:"F+D",key:"goals.super",sortable:!0,width:"50px",align:"end"},{title:"총 득점",key:"totalGoals",sortable:!0,width:"70px",align:"end"}],Ce=[{title:"선수명",key:"name",sortable:!0,width:"150px"},{title:"시즌",key:"seasonImg",sortable:!1,width:"60px",align:"center"},{title:"출전",key:"appearances",sortable:!0,width:"60px",align:"end"},{title:"어시스트",key:"assist",sortable:!0,width:"80px",align:"end"},{title:"골수",key:"totalGoals",sortable:!0,width:"60px",align:"end"},{title:"드리블",key:"dribble",sortable:!0,width:"80px",align:"end"},{title:"인터셉트",key:"intercept",sortable:!0,width:"80px",align:"end"},{title:"수비",key:"defending",sortable:!0,width:"60px",align:"end"},{title:"패스 성공률",key:"passSuccessRate",sortable:!0,width:"100px",align:"end"},{title:"블락",key:"blockSuccessRate",sortable:!0,width:"80px",align:"end"},{title:"태클",key:"tackleSuccessRate",sortable:!0,width:"80px",align:"end"},{title:"평균 평점",key:"spRating",sortable:!0,width:"90px",align:"end"},{title:"옐로우카드",key:"yellowCards",sortable:!0,width:"90px",align:"end"},{title:"레드카드",key:"redCards",sortable:!0,width:"80px",align:"end"}],Ae=s(()=>[...we.value[xe.value]||[]].filter(e=>e.appearances>0).sort((e,a)=>a.spRating-e.spRating)),Me=(e,a)=>{const t=[],s=new Set,l=e=>(void 0!==e.spid&&(e.spId=e.spid,delete e.spid),e.spId);return e.forEach(e=>{const o=l(e);if(!o)return;const r=a.find(e=>l(e)===o),n={...e,...r,assist:(null==r?void 0:r.assist)||0,dribble:(null==r?void 0:r.dribble)||0,intercept:(null==r?void 0:r.intercept)||0,defending:(null==r?void 0:r.defending)||0,passTry:(null==r?void 0:r.passTry)||0,passSuccess:(null==r?void 0:r.passSuccess)||0,blockTry:(null==r?void 0:r.blockTry)||0,blockSuccess:(null==r?void 0:r.blockSuccess)||0,tackleTry:(null==r?void 0:r.tackleTry)||0,tackle:(null==r?void 0:r.tackle)||0,yellowCards:(null==r?void 0:r.yellowCards)||0,redCards:(null==r?void 0:r.redCards)||0,spRating:(null==r?void 0:r.spRating)||0};t.push(n),s.add(o)}),a.forEach(e=>{const a=l(e);a&&!s.has(a)&&(t.push(e),s.add(a))}),t};async function Te(){var e;if(console.log("🔍 [버튼 디버깅] 화면 갱신 버튼 클릭됨"),0===Ne.value.length)return console.warn("닉네임이 없어서 함수 종료"),void alert("닉네임을 먼저 추가해주세요.");try{ke.value=!0,Ie.value=!0,console.log("화면 갱신 시작");const t=await N.get("/api/fc/user-stats").catch(e=>(console.error("사전 계산된 통계 조회 실패:",e),{data:{success:!1}}));if(t.data&&t.data.success){console.log("✅ 사전 계산된 통계 사용");for(const a of Ne.value){if(!a.ouid)continue;const s=t.data.data.find(e=>e.ouid===a.ouid);if(s){console.log("✅ 사용자 통계 적용:",a.userName),a.stats={...s.fcBrgStats,matchPeriod:{firstMatchDate:s.dataRange.fromDate,lastMatchDate:s.dataRange.toDate,totalDays:s.dataRange.matchCount>0?Math.ceil((new Date(s.dataRange.toDate)-new Date(s.dataRange.fromDate))/864e5):0}};const t=s.playerGoalStats||[],l=s.playerPerformanceStats||[];console.log("🔍 선수별 통계 데이터 구조 확인:",{userName:a.userName,goalStatsLength:t.length,performanceStatsLength:l.length,firstGoalStat:t[0],firstPerformanceStat:l[0]});const o=t.find(e=>"헨릭 라르손"===e.name),r=l[13];console.log("🔍 헨릭 라르손 골 통계:",o),console.log("🔍 잔루카 잠브로타(14번째) 활약 통계:",r),o&&console.log("🔍 헨릭 라르손 spId 정규화 전:",{spId:o.spId,spid:o.spid});const n=Me(t,l);console.log("🔍 최종 선수별 통계 데이터:",{userName:a.userName,uniqueStatsLength:n.length,samplePlayer:n[0]}),we.value[a.userName]=n,console.log("📊 통계 적용 완료:",{userName:a.userName,totalMatches:null==(e=s.fcBrgStats)?void 0:e.totalMatches,dataRange:s.dataRange,uniquePlayerStats:n.length})}else console.log("❌ 사용자의 사전 계산된 통계가 없음:",a.userName)}}else{console.log("❌ 사전 계산된 통계가 없어서 실시간 계산 사용");for(const e of Ne.value)if(e.ouid)try{const[a,t]=await Promise.all([N.get(`/api/fc/matches/${e.ouid}?refresh=false&limit=${Pe.value}`),N.get(`/api/fc/player-stats/${e.ouid}`)]);if(a.data&&a.data.success){const t=qe(a.data.data||[]);e.matchIds=t,e.stats=a.data.stats}if(t.data&&t.data.success){const a=t.data.data,s=Me(a,[]);we.value[e.userName]=s}}catch(a){console.error("실시간 계산 실패:",{userName:e.userName,error:a.message})}}console.log("✅ 화면 갱신 완료")}catch(a){console.error("화면 갱신 실패:",a),alert("데이터 갱신 중 오류가 발생했습니다. 다시 시도해주세요.")}finally{ke.value=!1,Ie.value=!1}}const Ve=async()=>{var e;try{const a=localStorage.getItem("token");if(!a)return console.log("토큰이 없습니다."),void(Se.value=!1);const t=await N.get("/api/me",{headers:{Authorization:`Bearer ${a}`}});console.log("사용자 정보 응답:",t.data),Se.value="admin"===(null==(e=t.data.user)?void 0:e.role),console.log("관리자 권한 확인:",Se.value)}catch(a){console.error("사용자 정보 조회 실패:",a),Se.value=!1}},Fe=async()=>{if(confirm("정말로 모든 데이터를 초기화하시겠습니까?")){De.value=!0;try{const e=localStorage.getItem("token");if(!e)throw new Error("인증 토큰이 없습니다.");const a=await N.delete("/api/admin/reset-data",{headers:{Authorization:`Bearer ${e}`}});if(!a.data.success)throw new Error(a.data.error||"데이터 초기화 실패");alert("데이터가 초기화되었습니다."),await async function(){var e,a,t,s,l;if(console.log("🔍 [버튼 디버깅] 데이터 재조회 버튼 클릭됨"),console.log("🔍 [버튼 디버깅] nicknames.value:",Ne.value),console.log("🔍 [버튼 디버깅] nicknames.value.length:",Ne.value.length),0===Ne.value.length)return console.warn("닉네임이 없어서 함수 종료"),void alert("닉네임을 먼저 추가해주세요.");try{Re.value=!0,console.log("새로운 데이터 조회 시작");for(const r of Ne.value)if(r.ouid){console.log("사용자 데이터 조회:",r.userName);try{const n=await N.get(`/api/fc/matches/${r.ouid}?refresh=true&limit=${Pe.value}`);if(console.log("새로운 데이터 조회 응답:",n),n.data&&n.data.success){const l=qe(n.data.data||[]);console.log("처리된 매치 데이터:",{userName:r.userName,matchCount:l.length,firstMatchDate:null==(e=l[0])?void 0:e.matchDate,lastMatchDate:null==(a=l[l.length-1])?void 0:a.matchDate}),r.matchIds=l,r.stats=n.data.stats;try{console.log("선수별 득점 통계 요청 시작:",{userName:r.userName,ouid:r.ouid});const e=await N.get(`/api/fc/player-stats/${r.ouid}`);if(console.log("선수별 득점 통계 응답:",{userName:r.userName,success:e.data.success,dataLength:null==(t=e.data.data)?void 0:t.length}),e.data.success){const a=e.data.data.map(e=>{var a,t;if(!e.name||e.name.startsWith("선수 ")){const t=null==(a=Ke.value)?void 0:a.find(a=>a.id===parseInt(e.spId)||a.spId===parseInt(e.spId));t&&(e.name=t.name)}if(!e.seasonImg&&e.spId){const a=e.spId.toString().substring(0,3),s=null==(t=Oe.value)?void 0:t.find(e=>e.seasonId===parseInt(a));s&&(e.seasonImg=s.seasonImg,e.seasonId=s.seasonId,e.seasonName=s.className)}return e}),t=Me(a,[]);we.value[r.userName]=t,console.log("선수별 득점 통계 저장 완료:",{userName:r.userName,playerCount:t.length})}else console.warn("선수별 득점 통계 응답 실패:",{userName:r.userName,error:e.data.error})}catch(o){console.error("선수별 득점 통계 조회 실패:",{userName:r.userName,error:o.message,response:null==(s=o.response)?void 0:s.data})}}else console.warn("새로운 데이터 조회 응답 실패:",{userName:r.userName,error:(null==(l=n.data)?void 0:l.error)||"알 수 없는 오류"})}catch(o){console.error("새로운 데이터 조회 실패:",{userName:r.userName,error:o.message})}}else console.warn("사용자 ouid가 없음:",r.userName)}catch(o){console.error("새로운 데이터 조회 실패:",o),alert("데이터 조회 중 오류가 발생했습니다. 다시 시도해주세요.")}finally{Re.value=!1}}()}catch(e){console.error("데이터 초기화 실패:",e),alert("데이터 초기화 중 오류가 발생했습니다.")}finally{De.value=!1}}},Ue=t(null);t([]);const je=t(!1),Le=async()=>{console.log("🔍 [디버깅] loadCurrentUser 시작");try{const e=localStorage.getItem("token");if(console.log("🔍 [디버깅] localStorage token:",e?"존재함":"없음"),!e)return void console.log("🔍 [디버깅] 토큰이 없음 - 함수 종료");console.log("🔍 [디버깅] /api/me API 호출 시작");const a=await N.get("/api/me");console.log("🔍 [디버깅] /api/me API 응답:",a.data),Ue.value=a.data,console.log("🔍 [디버깅] currentUser.value 설정 완료:",Ue.value),console.log("🔍 [디버깅] currentUser.value.nicknames:",Ue.value.nicknames)}catch(e){console.error("사용자 정보 조회 실패:",e)}},$e=async()=>{try{console.log("시즌 정보 로드 시작");const e=await N.get("/api/fc/seasons");if(e.data.success&&e.data.data){const a={};e.data.data.forEach(e=>{a[e.seasonId]=e}),_e.value=a,console.log("시즌 정보 로드 완료:",Object.keys(a).length)}}catch(e){console.error("시즌 정보 로드 실패:",e)}},Be=async()=>{var e;try{console.log("loadNicknames 시작");const a=await Ze();if(Ue.value&&(null==(e=Ue.value.user)?void 0:e.nicknames)){console.log("로그인 사용자 - 사용자별 닉네임과 기본 사용자 병합");const e=[...Ue.value.user.nicknames.map(e=>({userName:e.nickname,ouid:e.ouid,matchIds:[],stats:null,isUserNickname:!0}))];a.forEach(a=>{e.find(e=>e.userName===a.userName)||e.push(a)}),Ne.value=e}else console.log("비로그인 사용자 - 기본 사용자 목록만 사용"),Ne.value=a;console.log("loadNicknames 완료:",Ne.value.map(e=>({userName:e.userName,ouid:e.ouid})))}catch(a){console.error("loadNicknames 실패:",a),Ne.value=We()}},Ee=e=>{var a;if(!e)return"알 수 없음";const t=null==(a=Oe.value)?void 0:a.find(a=>a.seasonId===e||a.seasonId===parseInt(e));return t&&t.className||`시즌 ${e}`},Ke=t([]),Oe=t([]),ze=async()=>{try{const[e,a]=await Promise.all([N.get("/api/fc/players").catch(()=>({data:{success:!1,data:[]}})),N.get("/api/fc/seasons").catch(()=>({data:{success:!1,data:[]}}))]);e.data.success&&(Ke.value=e.data.data,console.log("전역 선수 정보 로드 완료:",Ke.value.length)),a.data.success&&(Oe.value=a.data.data,console.log("전역 시즌 정보 로드 완료:",Oe.value.length))}catch(e){console.error("전역 정보 로드 실패:",e)}};function qe(e){return Array.isArray(e)?e.map(e=>({...e,matchDate:e.matchDate})).sort((e,a)=>new Date(a.matchDate).getTime()-new Date(e.matchDate).getTime()):[]}l(async()=>{var e,a,t,s,l,o,r,n,i,d,c,u,m,g,v,h;try{ke.value=!0,Ie.value=!0,console.log("🚀 초기 로딩 시작 - 병렬 처리로 최적화");const[f,p,y,k,b,x,w]=await Promise.allSettled([ze(),Le(),Ve(),N.post("/api/fc/seasons/update").catch(e=>(console.error("시즌 정보 업데이트 실패:",e),null)),$e(),Be(),N.get("/api/fc/user-stats").catch(e=>(console.error("사전 계산된 통계 조회 실패:",e),{data:{success:!1}}))]);if(console.log("✅ 병렬 로딩 완료"),"fulfilled"===p.status&&p.value)await(async()=>{var e;if(console.log("🔍 [디버깅] loadUserNicknames 시작"),console.log("🔍 [디버깅] currentUser.value:",Ue.value),Ue.value)try{je.value=!0;const a=(null==(e=Ue.value.user)?void 0:e.nicknames)||[];console.log("🔍 [디버깅] 사용자 닉네임 목록 (로그인 사용자):",a),console.log("🔍 [디버깅] userNicknames.length:",a.length),Ne.value=a.map(e=>({userName:e.nickname,ouid:e.ouid,matchIds:[],stats:null})),console.log("🔍 [디버깅] 사용자 닉네임 업데이트 완료:",Ne.value),console.log("🔍 [디버깅] nicknames.value.length:",Ne.value.length)}catch(a){console.error("사용자 닉네임 목록 처리 실패:",a)}finally{je.value=!1}else console.log("🔍 [디버깅] currentUser.value가 없음 - 함수 종료")})(),console.log("사용자별 닉네임 목록 로드 완료");else if(console.log("로그인하지 않은 사용자 - 기본 사용자 목록만 사용"),0===Ne.value.length){console.log("기본 사용자 목록이 비어있어 다시 로드합니다.");const e=await Ze();Ne.value=e,console.log("기본 사용자 목록 재로드 완료:",Ne.value)}Ne.value.length>0&&(xe.value=Ne.value[0].userName,console.log("활성 탭 설정:",xe.value)),console.log("관리자 여부:","fulfilled"===y.status&&y.value),console.log("🔍 사전 계산된 통계 응답:",{success:"fulfilled"===w.status&&(null==(a=null==(e=w.value)?void 0:e.data)?void 0:a.success),dataLength:"fulfilled"===w.status?null==(l=null==(s=null==(t=w.value)?void 0:t.data)?void 0:s.data)?void 0:l.length:0,availableOuids:"fulfilled"===w.status&&(null==(n=null==(r=null==(o=w.value)?void 0:o.data)?void 0:r.data)?void 0:n.map(e=>e.ouid))||[]});let I=!1;if("fulfilled"===w.status&&(null==(d=null==(i=w.value)?void 0:i.data)?void 0:d.success)&&Array.isArray(w.value.data.data)){console.log("🔍 사전 계산된 통계 처리 시작:",{totalStats:w.value.data.data.length,availableOuids:w.value.data.data.map(e=>e.ouid),nicknames:Ne.value.map(e=>({userName:e.userName,ouid:e.ouid}))});for(const e of Ne.value){if(!e.ouid){console.log("❌ nickname.ouid 없음:",e.userName);continue}const a=w.value.data.data.find(a=>a.ouid===e.ouid);if(console.log("🔍 사용자 통계 검색:",{userName:e.userName,ouid:e.ouid,found:!!a}),a){console.log("✅ 사전 계산된 통계 사용:",e.userName),e.stats={...a.fcBrgStats,matchPeriod:{firstMatchDate:null==(c=a.dataRange)?void 0:c.fromDate,lastMatchDate:null==(u=a.dataRange)?void 0:u.toDate,totalDays:(null==(m=a.dataRange)?void 0:m.matchCount)>0?Math.ceil((new Date(a.dataRange.toDate)-new Date(a.dataRange.fromDate))/864e5):0}};const t=a.playerGoalStats||[],s=a.playerPerformanceStats||[];console.log("🔍 선수별 통계 데이터 구조 확인:",{userName:e.userName,goalStatsLength:t.length,performanceStatsLength:s.length,firstGoalStat:t[0],firstPerformanceStat:s[0]});const l=t.find(e=>"헨릭 라르손"===e.name),o=s[13];console.log("🔍 헨릭 라르손 골 통계:",l),console.log("🔍 잔루카 잠브로타(14번째) 활약 통계:",o),l&&console.log("🔍 헨릭 라르손 spId 정규화 전:",{spId:l.spId,spid:l.spid});const r=Me(t,s);console.log("🔍 최종 선수별 통계 데이터:",{userName:e.userName,uniqueStatsLength:r.length,samplePlayer:r[0]}),we.value[e.userName]=r,I=!0,console.log("📊 사전 계산된 통계 상세:",{userName:e.userName,totalMatches:null==(g=a.fcBrgStats)?void 0:g.totalMatches,averageGoalsFor:null==(v=a.fcBrgStats)?void 0:v.averageGoalsFor,averageGoalsAgainst:null==(h=a.fcBrgStats)?void 0:h.averageGoalsAgainst,dataRange:a.dataRange,matchPeriod:e.stats.matchPeriod})}else console.log("❌ 사용자 통계 없음:",e.userName)}console.log("📊 사전 계산된 통계 처리 완료:",{hasPrecalculatedStats:I,processedCount:Ne.value.filter(e=>e.stats).length})}if(!I){console.log("🔄 실시간 계산 시작 (사전 계산된 통계 없음)");const e=Ne.value.map(async e=>{if(e.ouid)try{const[a,t]=await Promise.all([fe.fetchMatches(e.ouid,!0,100,Pe.value||100),N.get(`/api/fc/player-stats/${e.ouid}`).catch(e=>({data:{success:!1,data:[]}}))]);if(a&&a.success&&Array.isArray(a.data)){const t=qe(a.data);e.matchIds=t,e.stats=a.stats}if(t.data.success){const a=t.data.data.map(e=>{var a,t;if(!e.name||e.name.startsWith("선수 ")){const t=null==(a=Ke.value)?void 0:a.find(a=>a.id===parseInt(e.spId)||a.spId===parseInt(e.spId));t&&(e.name=t.name)}if(!e.seasonImg&&e.spId){const a=e.spId.toString().substring(0,3),s=null==(t=Oe.value)?void 0:t.find(e=>e.seasonId===parseInt(a));s&&(e.seasonImg=s.seasonImg,e.seasonId=s.seasonId,e.seasonName=s.className)}return e}),s=Me(a,[]);we.value[e.userName]=s}}catch(a){console.error("데이터 조회 실패:",{userName:e.userName,error:a.message})}});await Promise.all(e)}console.log("초기 데이터 로딩 완료")}catch(f){console.error("초기 데이터 로딩 실패:",f),alert("초기 데이터 로딩 중 오류가 발생했습니다. 페이지를 새로고침해주세요.")}finally{ke.value=!1,Ie.value=!1}});const Ze=async()=>{var e,a,t;try{console.log("loadDefaultUsers 시작"),console.log("API 호출: /api/fc/default-users");const s=await N.get("/api/fc/default-users");if(console.log("API 응답:",s.data),console.log("API 응답 데이터 구조:",{success:s.data.success,dataLength:null==(e=s.data.data)?void 0:e.length,dataKeys:(null==(a=s.data.data)?void 0:a[0])?Object.keys(s.data.data[0]):[],firstItem:null==(t=s.data.data)?void 0:t[0]}),s.data.success&&s.data.data){const e=s.data.data.map(e=>(console.log("사용자 데이터 처리 (비로그인 사용자):",e),{userName:e.nickName,ouid:e.ouid,matchIds:[],stats:null}));return console.log("기본 사용자 목록 변환 완료 (비로그인 사용자):",e),e}return console.warn("기본 사용자 목록 응답 실패:",s.data),console.log("폴백 기본 사용자 목록 사용"),We()}catch(s){return console.error("기본 사용자 목록 로드 실패:",s),console.log("폴백 기본 사용자 목록 사용"),We()}},We=()=>[{userName:"junspapa",ouid:"a58fcf2750b6054f7508729dc99e7625",matchIds:[],stats:null},{userName:"junnypapa",ouid:"511b736fe892566d0c6013ba2fc1ff7e",matchIds:[],stats:null},{userName:"절대월클아니다",ouid:"1234567890abcdef1234567890abcdef",matchIds:[],stats:null},{userName:"머니트렌드",ouid:"abcdef1234567890abcdef1234567890",matchIds:[],stats:null}];return(e,a)=>{const t=o("v-progress-circular"),s=o("v-card"),l=o("v-overlay"),k=o("v-spacer"),b=o("v-text-field"),N=o("v-btn"),fe=o("v-card-title"),pe=o("v-col"),ye=o("v-row"),be=o("v-icon"),_e=o("v-chip"),Re=o("v-container"),Me=o("v-data-table"),Ve=o("v-tab"),Ue=o("v-tabs"),je=o("v-img"),Le=o("v-window-item"),$e=o("v-window");return r(),n(Re,null,{default:i(()=>[d(l,{modelValue:u(ke),"onUpdate:modelValue":a[0]||(a[0]=e=>m(ke)?ke.value=e:null),class:"align-center justify-center"},{default:i(()=>[d(s,{class:"pa-4 text-center"},{default:i(()=>[d(t,{indeterminate:"",size:"64",color:"primary"}),a[7]||(a[7]=c("div",{class:"mt-4 text-h6"},"데이터를 불러오는 중...",-1)),a[8]||(a[8]=c("div",{class:"text-body-2 text-grey"},"잠시만 기다려주세요",-1))]),_:1,__:[7,8]})]),_:1},8,["modelValue"]),d(ye,{class:"mt-8"},{default:i(()=>[d(pe,{cols:"12"},{default:i(()=>[d(s,{class:"mx-auto pa-4"},{default:i(()=>[d(fe,{class:"d-flex align-center"},{default:i(()=>[a[11]||(a[11]=c("span",null,"FC 온라인 전적 검색",-1)),d(k),Se.value?(r(),n(b,{key:0,modelValue:Pe.value,"onUpdate:modelValue":a[1]||(a[1]=e=>Pe.value=e),type:"number",label:"매치 수",class:"mr-4",style:{"max-width":"120px"},min:1,max:1e3,density:"compact","hide-details":""},null,8,["modelValue"])):g("",!0),d(N,{color:"primary",onClick:Te,loading:u(ke),disabled:u(ke),class:"mr-2"},{default:i(()=>a[9]||(a[9]=[v(" 화면 갱신 ")])),_:1,__:[9]},8,["loading","disabled"]),Se.value?(r(),n(N,{key:1,color:"error",onClick:Fe,loading:De.value,class:"ml-4"},{default:i(()=>a[10]||(a[10]=[v(" 데이터 초기화 ")])),_:1,__:[10]},8,["loading"])):g("",!0)]),_:1,__:[11]}),d(Re,null,{default:i(()=>[d(ye,null,{default:i(()=>[d(pe,{cols:"12"})]),_:1}),d(ye,null,{default:i(()=>[d(pe,{cols:"12"},{default:i(()=>[d(u(x),{modelValue:Ne.value,"onUpdate:modelValue":a[2]||(a[2]=e=>Ne.value=e),"item-key":"userName",handle:".drag-handle",onEnd:e.saveNicknames},{item:i(({element:t})=>[d(_e,{class:"ma-1",closable:"","onClick:close":a=>e.removeNickname(Ne.value.indexOf(t)),disabled:u(ke)},{default:i(()=>[d(be,{class:"drag-handle mr-1"},{default:i(()=>a[12]||(a[12]=[v("mdi-drag")])),_:1,__:[12]}),v(" "+h(t.userName),1)]),_:2},1032,["onClick:close","disabled"])]),_:1},8,["modelValue","onEnd"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),d(ye,{class:"mt-8"},{default:i(()=>[d(pe,{cols:"12"},{default:i(()=>[d(s,{class:"mx-auto pa-4"},{default:i(()=>[d(fe,{class:"text-h5 mb-4"},{default:i(()=>a[13]||(a[13]=[v("FC BRG 통계")])),_:1,__:[13]}),a[14]||(a[14]=c("div",{class:"mb-4 pa-3 bg-grey-lighten-4 rounded"},[c("h6",{class:"text-subtitle-2 mb-2"},"📊 데이터 범위 안내"),c("div",{class:"text-body-2"},[c("p",null,[c("strong",null,"FC BRG 통계:"),v(" 최근 100경기 누적 데이터")]),c("p",null,[c("strong",null,"선수별 득점 통계:"),v(" 최근 100경기 누적 데이터")]),c("p",null,[c("strong",null,"선수별 활약:"),v(" 최근 100경기 누적 데이터")])])],-1)),d(Me,{headers:[{title:"닉네임",key:"userName",align:"start",sortable:!0},{title:"총 경기",key:"stats.totalMatches",align:"end",sortable:!0},{title:"평균득점",key:"stats.averageGoalsFor",align:"end",sortable:!0},{title:"평균실점",key:"stats.averageGoalsAgainst",align:"end",sortable:!0},{title:"총득점",key:"stats.totalGoalsFor",align:"end",sortable:!0},{title:"총실점",key:"stats.totalGoalsAgainst",align:"end",sortable:!0},{title:"승",key:"stats.win",align:"end",sortable:!0},{title:"무",key:"stats.draw",align:"end",sortable:!0},{title:"패",key:"stats.lose",align:"end",sortable:!0},{title:"평균 코너킥",key:"stats.cornerKick",align:"end",sortable:!0},{title:"평균 점유율",key:"stats.possession",align:"end",sortable:!0},{title:"평균 경기평점",key:"stats.averageRating",align:"end",sortable:!0},{title:"총 슈팅",key:"stats.shootTotal",align:"end",sortable:!0},{title:"유효 슈팅",key:"stats.effectiveShootTotal",align:"end",sortable:!0},{title:"오프사이드",key:"stats.offsideCount",align:"end",sortable:!0},{title:"매치 기간",key:"matchPeriod",align:"end",sortable:!0}],items:Ne.value,loading:u(ke),"sort-by":[{key:"stats.averageRating",order:"desc"}],class:"elevation-1 rounded-lg",density:"comfortable",hover:""},{"item.userName":i(({item:e})=>[c("div",w,h(e.userName||"닉네임 없음"),1)]),"item.stats.totalMatches":i(({item:e})=>[c("div",I,h(e.stats&&!u(ke)?e.stats.totalMatches:"-"),1)]),"item.stats.averageGoalsFor":i(({item:e})=>[c("div",_,h(e.stats&&!u(ke)?Number(e.stats.averageGoalsFor).toFixed(2):"-"),1)]),"item.stats.averageGoalsAgainst":i(({item:e})=>[c("div",S,h(e.stats&&!u(ke)?Number(e.stats.averageGoalsAgainst).toFixed(2):"-"),1)]),"item.stats.totalGoalsFor":i(({item:e})=>[c("div",D,h(e.stats&&!u(ke)?e.stats.totalGoalsFor:"-"),1)]),"item.stats.totalGoalsAgainst":i(({item:e})=>[c("div",R,h(e.stats&&!u(ke)?e.stats.totalGoalsAgainst:"-"),1)]),"item.stats.win":i(({item:e})=>[c("div",P,h(e.stats&&!u(ke)?e.stats.win:"-"),1)]),"item.stats.draw":i(({item:e})=>[c("div",G,h(e.stats&&!u(ke)?e.stats.draw:"-"),1)]),"item.stats.lose":i(({item:e})=>[c("div",C,h(e.stats&&!u(ke)?e.stats.lose:"-"),1)]),"item.stats.cornerKick":i(({item:e})=>[c("div",A,h(e.stats&&!u(ke)?Number(e.stats.cornerKick).toFixed(1):"-"),1)]),"item.stats.possession":i(({item:e})=>[c("div",M,h(e.stats&&!u(ke)?Number(e.stats.possession).toFixed(2)+"%":"-"),1)]),"item.stats.averageRating":i(({item:e})=>[c("div",T,h(e.stats&&!u(ke)?Number(e.stats.averageRating).toFixed(1):"-"),1)]),"item.stats.shootTotal":i(({item:e})=>[c("div",V,h(e.stats&&!u(ke)?e.stats.shootTotal:"-"),1)]),"item.stats.effectiveShootTotal":i(({item:e})=>[c("div",F,h(e.stats&&!u(ke)?e.stats.effectiveShootTotal:"-"),1)]),"item.stats.offsideCount":i(({item:e})=>[c("div",U,h(e.stats&&!u(ke)?e.stats.offsideCount:"-"),1)]),"item.matchPeriod":i(({item:e})=>[c("div",j,[v(h(e.stats&&e.stats.matchPeriod&&e.stats.matchPeriod.firstMatchDate?new Date(e.stats.matchPeriod.firstMatchDate).toLocaleDateString("ko-KR",{timeZone:"Asia/Seoul"}):"-")+" ~ "+h(e.stats&&e.stats.matchPeriod&&e.stats.matchPeriod.lastMatchDate?new Date(e.stats.matchPeriod.lastMatchDate).toLocaleDateString("ko-KR",{timeZone:"Asia/Seoul"}):"-")+" ",1),c("div",L,h(e.stats&&e.stats.matchPeriod&&e.stats.matchPeriod.totalDays>0?`(${e.stats.matchPeriod.totalDays}일)`:""),1)])]),_:2},1032,["items","loading"])]),_:1,__:[14]})]),_:1})]),_:1}),d(ye,{class:"mt-8"},{default:i(()=>[d(pe,{cols:"12"},{default:i(()=>[d(s,{class:"mx-auto pa-4"},{default:i(()=>[d(fe,{class:"text-h5 mb-4"},{default:i(()=>a[15]||(a[15]=[v("선수별 득점 통계")])),_:1,__:[15]}),d(Ue,{modelValue:xe.value,"onUpdate:modelValue":a[3]||(a[3]=e=>xe.value=e),class:"mb-4"},{default:i(()=>[(r(!0),f(y,null,p(Ne.value,e=>(r(),n(Ve,{key:e.userName,value:e.userName},{default:i(()=>[v(h(e.userName||"닉네임 없음"),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"]),d($e,{modelValue:xe.value,"onUpdate:modelValue":a[4]||(a[4]=e=>xe.value=e)},{default:i(()=>[(r(!0),f(y,null,p(Ne.value,e=>(r(),n(Le,{key:e.userName,value:e.userName},{default:i(()=>[d(Me,{headers:Ge,items:[...we.value[e.userName]||[],{name:"총합",seasonImg:"",appearances:(we.value[e.userName]||[]).reduce((e,a)=>e+(a.appearances||0),0),goals:{normal:(we.value[e.userName]||[]).reduce((e,a)=>{var t;return e+((null==(t=a.goals)?void 0:t.normal)||0)},0),finesse:(we.value[e.userName]||[]).reduce((e,a)=>{var t;return e+((null==(t=a.goals)?void 0:t.finesse)||0)},0),header:(we.value[e.userName]||[]).reduce((e,a)=>{var t;return e+((null==(t=a.goals)?void 0:t.header)||0)},0),lob:(we.value[e.userName]||[]).reduce((e,a)=>{var t;return e+((null==(t=a.goals)?void 0:t.lob)||0)},0),flare:(we.value[e.userName]||[]).reduce((e,a)=>{var t;return e+((null==(t=a.goals)?void 0:t.flare)||0)},0),low:(we.value[e.userName]||[]).reduce((e,a)=>{var t;return e+((null==(t=a.goals)?void 0:t.low)||0)},0),volley:(we.value[e.userName]||[]).reduce((e,a)=>{var t;return e+((null==(t=a.goals)?void 0:t.volley)||0)},0),freekick:(we.value[e.userName]||[]).reduce((e,a)=>{var t;return e+((null==(t=a.goals)?void 0:t.freekick)||0)},0),penalty:(we.value[e.userName]||[]).reduce((e,a)=>{var t;return e+((null==(t=a.goals)?void 0:t.penalty)||0)},0),knuckle:(we.value[e.userName]||[]).reduce((e,a)=>{var t;return e+((null==(t=a.goals)?void 0:t.knuckle)||0)},0),bicycle:(we.value[e.userName]||[]).reduce((e,a)=>{var t;return e+((null==(t=a.goals)?void 0:t.bicycle)||0)},0),super:(we.value[e.userName]||[]).reduce((e,a)=>{var t;return e+((null==(t=a.goals)?void 0:t.super)||0)},0)},totalGoals:(we.value[e.userName]||[]).reduce((e,a)=>e+(a.totalGoals||0),0)}],loading:Ie.value,class:"elevation-1 rounded-lg",density:"comfortable",hover:""},{"item.name":i(({item:e})=>[c("div",$,h(e.name),1)]),"item.seasonImg":i(({item:e})=>[c("div",B,[e.seasonImg?(r(),n(je,{key:0,src:e.seasonImg,width:"24",height:"24",title:e.seasonName||Ee(e.seasonId)},null,8,["src","title"])):g("",!0)])]),"item.appearances":i(({item:e})=>[c("div",E,h(e.appearances),1)]),"item.goals.normal":i(({item:e})=>{var a;return[c("div",K,h((null==(a=e.goals)?void 0:a.normal)||0),1)]}),"item.goals.finesse":i(({item:e})=>{var a;return[c("div",O,h((null==(a=e.goals)?void 0:a.finesse)||0),1)]}),"item.goals.header":i(({item:e})=>{var a;return[c("div",z,h((null==(a=e.goals)?void 0:a.header)||0),1)]}),"item.goals.lob":i(({item:e})=>{var a;return[c("div",q,h((null==(a=e.goals)?void 0:a.lob)||0),1)]}),"item.goals.flare":i(({item:e})=>{var a;return[c("div",Z,h((null==(a=e.goals)?void 0:a.flare)||0),1)]}),"item.goals.low":i(({item:e})=>{var a;return[c("div",W,h((null==(a=e.goals)?void 0:a.low)||0),1)]}),"item.goals.volley":i(({item:e})=>{var a;return[c("div",H,h((null==(a=e.goals)?void 0:a.volley)||0),1)]}),"item.goals.freekick":i(({item:e})=>{var a;return[c("div",J,h((null==(a=e.goals)?void 0:a.freekick)||0),1)]}),"item.goals.penalty":i(({item:e})=>{var a;return[c("div",Q,h((null==(a=e.goals)?void 0:a.penalty)||0),1)]}),"item.goals.knuckle":i(({item:e})=>{var a;return[c("div",X,h((null==(a=e.goals)?void 0:a.knuckle)||0),1)]}),"item.goals.bicycle":i(({item:e})=>{var a;return[c("div",Y,h((null==(a=e.goals)?void 0:a.bicycle)||0),1)]}),"item.goals.super":i(({item:e})=>{var a;return[c("div",ee,h((null==(a=e.goals)?void 0:a.super)||0),1)]}),"item.totalGoals":i(({item:e})=>[c("div",ae,h(e.totalGoals),1)]),_:2},1032,["items","loading"])]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),d(ye,{class:"mt-8"},{default:i(()=>[d(pe,{cols:"12"},{default:i(()=>[d(s,{class:"mx-auto pa-4"},{default:i(()=>[d(fe,{class:"text-h5 mb-4"},{default:i(()=>a[16]||(a[16]=[v("선수별 활약")])),_:1,__:[16]}),d(Ue,{modelValue:xe.value,"onUpdate:modelValue":a[5]||(a[5]=e=>xe.value=e),class:"mb-4"},{default:i(()=>[(r(!0),f(y,null,p(Ne.value,e=>(r(),n(Ve,{key:e.userName,value:e.userName},{default:i(()=>[v(h(e.userName||"닉네임 없음"),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"]),d($e,{modelValue:xe.value,"onUpdate:modelValue":a[6]||(a[6]=e=>xe.value=e)},{default:i(()=>[(r(!0),f(y,null,p(Ne.value,e=>(r(),n(Le,{key:e.userName,value:e.userName},{default:i(()=>[d(Me,{headers:Ce,items:Ae.value,"items-per-page":50,class:"elevation-1 rounded-lg",density:"comfortable",hover:"",loading:Ie.value,"no-data-text":"선수 활약 데이터가 없습니다."},{"item.name":i(({item:e})=>[c("div",te,h(e.name),1)]),"item.seasonImg":i(({item:e})=>[c("div",se,[e.seasonImg?(r(),n(je,{key:0,src:e.seasonImg,width:"24",height:"24",title:e.seasonName||Ee(e.seasonId)},null,8,["src","title"])):g("",!0)])]),"item.appearances":i(({item:e})=>[c("div",le,h(e.appearances),1)]),"item.assist":i(({item:e})=>[c("div",oe,h(e.assist),1)]),"item.totalGoals":i(({item:e})=>[c("div",re,h(e.totalGoals),1)]),"item.dribble":i(({item:e})=>[c("div",ne,h(e.dribble),1)]),"item.intercept":i(({item:e})=>[c("div",ie,h(e.intercept),1)]),"item.defending":i(({item:e})=>[c("div",de,h(e.defending),1)]),"item.passSuccessRate":i(({item:e})=>{return[c("div",ce,h((a=e,a&&a.passTry&&0!==a.passTry?Math.round(a.passSuccess/a.passTry*100*10)/10:0))+"%",1)];var a}),"item.blockSuccessRate":i(({item:e})=>{return[c("div",ue,h((a=e,a&&a.blockTry&&0!==a.blockTry?Math.round(a.blockSuccess/a.blockTry*100*10)/10:0))+"%",1)];var a}),"item.tackleSuccessRate":i(({item:e})=>{return[c("div",me,h((a=e,a&&a.tackleTry&&0!==a.tackleTry?Math.round(a.tackle/a.tackleTry*100*10)/10:0))+"%",1)];var a}),"item.spRating":i(({item:e})=>[c("div",ge,h(Number(e.spRating).toFixed(1)),1)]),"item.yellowCards":i(({item:e})=>[c("div",ve,h(e.yellowCards),1)]),"item.redCards":i(({item:e})=>[c("div",he,h(e.redCards),1)]),_:2},1032,["items","loading"])]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})}}},[["__scopeId","data-v-85476728"]]);export{fe as default};
